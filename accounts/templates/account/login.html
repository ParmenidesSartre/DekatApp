{% extends "venues/base.html" %}
{% load account %}

{% block title %}Log in - Dekat{% endblock %}

{% block content %}
<div class="max-w-lg mx-auto relative">
    
    <!-- Floating Decorative Elements -->
    <div class="absolute -top-12 -left-12 text-5xl animate-[float_4s_ease-in-out_infinite] opacity-60 hidden md:block">‚ú®</div>
    <div class="absolute -bottom-8 -right-16 text-5xl animate-[float_5s_ease-in-out_infinite] animation-delay-1000 opacity-60 hidden md:block">üçÑ</div>

    <!-- Main Card -->
    <div class="bg-white/60 backdrop-blur-xl rounded-[2.5rem] p-8 md:p-10 border border-white shadow-soft relative overflow-hidden group">
        
        <!-- Background Blob Effect -->
        <div class="absolute top-0 right-0 w-32 h-32 bg-pop-purple/20 rounded-full blur-3xl -mr-10 -mt-10 pointer-events-none"></div>

        <!-- Header -->
        <div class="relative z-10 text-center mb-8">
            <h1 class="font-display font-extrabold text-3xl md:text-4xl text-slate-900 mb-2">
                Welcome back!
            </h1>
            <p class="text-slate-500 font-bold text-sm">
                Ready to find your next happy place?
            </p>
            
            <!-- Sticker -->
            <div class="sticker absolute -top-2 -right-2 bg-pop-lime text-slate-800 px-3 py-1 rounded-lg text-xs font-bold shadow-sm border border-white rotate-[12deg] hidden sm:block">
                üëã Hello!
            </div>
        </div>

        <!-- Form -->
        <form method="post" action="{% url 'account_login' %}" class="relative z-10 space-y-5">
            {% csrf_token %}
            
            {% if form.non_field_errors %}
                <div class="bg-red-50 text-red-600 px-4 py-3 rounded-2xl text-sm font-bold border border-red-100">
                    {{ form.non_field_errors }}
                </div>
            {% endif %}

            <!-- Login Input -->
            <div class="group">
                <label for="id_login" class="block text-xs font-extrabold text-slate-500 uppercase tracking-wider mb-2 ml-2">Username or Email</label>
                <div class="relative transition-transform duration-200 focus-within:scale-[1.02]">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400">
                        <i class="fa-solid fa-user"></i>
                    </div>
                    <!-- Manual input to preserve specific tailwind styling -->
                    <input type="text" 
                           name="login" 
                           placeholder="Enter your username" 
                           autocomplete="username" 
                           maxlength="150" 
                           required 
                           id="id_login"
                           class="w-full bg-white rounded-3xl py-4 pl-11 pr-5 border-2 border-slate-100 text-slate-700 font-bold placeholder:text-slate-300 focus:outline-none focus:border-brand-main focus:ring-4 focus:ring-brand-main/10 transition-all shadow-sm {% if form.login.errors %}border-red-300 focus:border-red-500{% endif %}">
                </div>
                {% if form.login.errors %}
                    <div class="text-xs text-red-500 font-bold mt-1 ml-2">{{ form.login.errors.0 }}</div>
                {% endif %}
            </div>

            <!-- Password Input -->
            <div class="group">
                <label for="id_password" class="block text-xs font-extrabold text-slate-500 uppercase tracking-wider mb-2 ml-2">Password</label>
                <div class="relative transition-transform duration-200 focus-within:scale-[1.02]">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400">
                        <i class="fa-solid fa-lock"></i>
                    </div>
                    <input type="password" 
                           name="password" 
                           placeholder="Enter your password" 
                           autocomplete="current-password" 
                           required 
                           id="id_password"
                           class="w-full bg-white rounded-3xl py-4 pl-11 pr-5 border-2 border-slate-100 text-slate-700 font-bold placeholder:text-slate-300 focus:outline-none focus:border-brand-main focus:ring-4 focus:ring-brand-main/10 transition-all shadow-sm {% if form.password.errors %}border-red-300 focus:border-red-500{% endif %}">
                </div>
                {% if form.password.errors %}
                    <div class="text-xs text-red-500 font-bold mt-1 ml-2">{{ form.password.errors.0 }}</div>
                {% endif %}
            </div>

            <!-- Extras -->
            <div class="flex items-center justify-between px-2">
                <label class="inline-flex items-center gap-2 text-sm font-bold text-slate-500 cursor-pointer hover:text-slate-700 transition-colors">
                    <input type="checkbox" name="remember" id="id_remember" class="rounded-md border-slate-300 text-brand-main focus:ring-brand-main/30 w-4 h-4"> 
                    Remember me
                </label>
                <a class="text-sm font-bold text-brand-main hover:text-brand-dark hover:underline decoration-2 underline-offset-2 transition-all" href="{% url 'account_reset_password' %}">
                    Forgot Password?
                </a>
            </div>

            {% if redirect_field_value %}
                <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
            {% endif %}

            <!-- Actions -->
            <div class="pt-2 flex flex-col gap-3">
                <button type="submit" class="w-full inline-flex items-center justify-center gap-2 bg-brand-main text-white font-display font-bold text-lg py-4 px-6 rounded-3xl shadow-cute hover:shadow-cute-hover hover:-translate-y-1 active:translate-y-0 transition-all duration-200">
                    <i class="fa-solid fa-rocket"></i> 
                    Log In
                </button>
                
                <a href="{% url 'signup_choice' %}" class="w-full inline-flex items-center justify-center gap-2 bg-white text-slate-700 font-display font-bold py-4 px-6 rounded-3xl border-2 border-slate-100 hover:bg-slate-50 hover:border-slate-200 transition-all duration-200">
                    Create an Account
                </a>

                <a href="{% url 'login_choice' %}" class="w-full inline-flex items-center justify-center gap-2 text-slate-400 font-bold text-sm py-2 hover:text-slate-600 transition-colors">
                    <i class="fa-solid fa-arrow-left"></i> Back to Options
                </a>
            </div>
        </form>
    </div>
    
    <!-- Footer Text -->
    <div class="mt-8 text-center">
        <p class="text-slate-500 font-bold text-sm">
            Having trouble? <a href="{% url 'faq' %}" class="text-slate-700 hover:text-brand-main underline decoration-2 underline-offset-2">Contact Support</a>
        </p>
    </div>
</div>
{% endblock %}